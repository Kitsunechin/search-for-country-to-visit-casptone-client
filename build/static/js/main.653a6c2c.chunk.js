(this.webpackJsonpnoteful=this.webpackJsonpnoteful||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,function(e,t,n){e.exports=n(42)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(21),s=n.n(r),c=(n(29),n(2)),i=n(3),l=n(5),u=n(4),m=n(11),d=(n(30),o.a.createContext({drawerToggleButton:function(){}})),h="https://country-search-server-app.herokuapp.com/api",p="country-search-capstone-server",v={saveAuthToken:function(e){window.sessionStorage.setItem(p,e)},getAuthToken:function(){return window.sessionStorage.getItem(p)},clearAuthToken:function(){window.sessionStorage.removeItem(p),sessionStorage.clear()},hasAuthToken:function(){return!!v.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))},saveUserId:function(e){return window.sessionStorage.setItem("user_id",e)},getUserId:function(e){return window.sessionStorage.getItem("user_id",e)}},f=v;function g(){return o.a.createElement("div",null,"404 Page not Found")}n(17);var w=n(10),E={postLogin:function(e){return fetch("".concat(h,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.log("error:",e)}))},postUser:function(e){return fetch("".concat(h,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.log("error:",e)}))}},y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t,n={},o=new FormData(e.target),r=Object(w.a)(o);try{for(r.s();!(t=r.n()).done;){var s=t.value;n[s[0]]=s[1]}}catch(l){r.e(l)}finally{r.f()}console.log(n);var c=n.username,i=n.password;""===a.validateUsername(c)&&a.setState({error:"username is not valid"}),""===a.validatePassword(i)&&a.setState({error:"password is not valid"}),a.setState({params:n}),console.log(a.state.params),a.setState({error:null}),E.postLogin({user_name:c,user_password:i}).then((function(e){console.log("response ID",e),c="",i="",f.saveAuthToken(e.authToken),f.saveUserId(e.userId),window.location="/visited"})).then((function(e){console.log("response:",e)})).catch((function(e){console.log(e)}))},a.state={error:null,params:{username:"",password:""}},a}return Object(i.a)(n,[{key:"formatQueryParams",value:function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}},{key:"validateUsername",value:function(e){var t=e;return e.match(/^[a-zA-Z\-]+$/)||(t=""),t}},{key:"validatePassword",value:function(e){var t=e;return e.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{8,}$/)||(t=""),t}},{key:"render",value:function(){var e=!!this.state.error&&o.a.createElement("p",{className:"error-message"},this.state.error);return o.a.createElement("div",{className:"inner-container"},o.a.createElement("form",{className:"add-user",onSubmit:this.handleSubmit},e,o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"input-group"},o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",name:"username",className:"login-input",placeholder:"Username",required:!0})),o.a.createElement("div",{className:"input-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",className:"login-input",placeholder:"Password",required:!0})),o.a.createElement("button",{type:"submit"},"Login"))))}}]),n}(o.a.Component),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t,n={},o=new FormData(e.target),r=Object(w.a)(o);try{for(r.s();!(t=r.n()).done;){var s=t.value;n[s[0]]=s[1]}}catch(u){r.e(u)}finally{r.f()}console.log(n);var c=n.username,i=n.email,l=n.password;""===a.validateEmail(i)&&a.setState({error:"email is not valid"}),""===a.validateUsername(c)&&a.setState({error:"username is not valid"}),""===a.validatePassword(l)&&a.setState({error:"password is not valid"}),a.setState({params:n}),a.setState({error:null}),E.postUser({user_name:c,user_email:i,user_password:l}).then((function(e){console.log("user:",e),f.saveAuthToken(e.authToken),f.saveUserId(e.id),window.location="/visited"})).catch((function(e){a.setState({error:e.error})}))},a.state={error:null,params:{username:"",email:"",password:""}},a}return Object(i.a)(n,[{key:"formatQueryParams",value:function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}},{key:"validateEmail",value:function(e){var t=e;return e.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)||(t=""),t}},{key:"validateUsername",value:function(e){var t=e;return e.match(/^[a-zA-Z\-]+$/)||(t=""),t}},{key:"validatePassword",value:function(e){var t=e;return e.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{8,}$/)||(t=""),t}},{key:"render",value:function(){var e=!!this.state.error&&o.a.createElement("p",{className:"error-message"},this.state.error);return o.a.createElement("div",{className:"inner-container"},o.a.createElement("form",{className:"add-user",onSubmit:this.handleSubmit},e,o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"input-group"},o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",name:"username",className:"login-input",placeholder:"Username",required:!0})),o.a.createElement("div",{className:"input-group"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"text",name:"email",className:"login-input",placeholder:"Email",required:!0})),o.a.createElement("div",{className:"input-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",className:"login-input",placeholder:"Password",required:!0})),o.a.createElement("button",{type:"submit"},"Register"))))}}]),n}(o.a.Component),k=(n(31),function(){return o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,"Trippster"),o.a.createElement("div",{className:"subtitle"},"With Trippster you can plan your future travells and keep track of the places you have already visited",o.a.createElement("span",null," Login or Register and start planning your next destination!")))}),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).showLoginBox=function(){a.setState({isLoginOpen:!0,isRegisterOpen:!1})},a.showRegisterBox=function(){a.setState({isRegisterOpen:!0,isLoginOpen:!1})},a.state={isLoginOpen:!1,isRegisterOpen:!1},a}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"main-box"},o.a.createElement(k,null),o.a.createElement("div",{className:"box-controller"},o.a.createElement("div",{className:"controller "+(this.state.isLoginOpen?"selected-controller":""),onClick:this.showLoginBox},"Login"),o.a.createElement("div",{className:"controller "+(this.state.isRegisterOpen?"selected-controller":""),onClick:this.showRegisterBox},"Register")),o.a.createElement("div",{className:"box-container"},this.state.isLoginOpen?o.a.createElement(y,null):o.a.createElement(b,null)))}}]),n}(o.a.Component),j=n(6),C=(n(32),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("button",{className:"toggle-button",onClick:this.context.drawerToggleButton},o.a.createElement("div",{className:"toggle-button_line"}),o.a.createElement("div",{className:"toggle-button_line"}),o.a.createElement("div",{className:"toggle-button_line"}))}}]),n}(o.a.Component));C.contextType=d;var N=C,S=(n(33),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).logOutClick=function(){console.log("Logging out"),f.clearAuthToken(),f.getUserId=function(e){},window.location="/"},e}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"outer-nav toolbar"},o.a.createElement("nav",{className:"toolbar_navigation"},o.a.createElement("div",{className:"toolbar-toggle"},o.a.createElement(N,{click:this.context.drawerToggleButton})),o.a.createElement(j.b,{className:"nav_logo",to:"/"},o.a.createElement("h2",{className:"logo"},"Trippster")),f.hasAuthToken()?o.a.createElement("div",{className:"spacer"}):"",f.hasAuthToken()?o.a.createElement("div",{className:"nav"},o.a.createElement(j.c,{className:"nav-link",to:"/"},o.a.createElement("h3",null,"Home")),o.a.createElement(j.c,{className:"nav-link",to:"/visited"},o.a.createElement("h3",null,"Visited")),o.a.createElement(j.c,{className:"nav-link",to:"/bucket-list"},o.a.createElement("h3",null,"Bucket List")),o.a.createElement(j.c,{className:"nav-link",to:"/",onClick:this.logOutClick},o.a.createElement("h3",null,"Log Out"))):""))}}]),n}(a.Component));S.contextType=d;var A=S,T=n(15),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t,n={},o=new FormData(e.target),r=Object(w.a)(o);try{for(r.s();!(t=r.n()).done;){var s=t.value;n[s[0]]=s[1]}}catch(m){r.e(m)}finally{r.f()}console.log(n);var c=n.selectCountry,i=c.split("_")[0],l=c.split("_")[1];console.log(i,l),a.setState({params:n}),console.log(a.state.params);var u={id:i,user_id:f.getUserId(),nicename:l};console.log(u),fetch("".concat(h,"/bucket-list"),{method:"POST",body:JSON.stringify(u),headers:{"content-type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e.json()})).then((function(e){a.populateBucketListCountry(),console.log(a.state)})).catch((function(e){a.setState({error:e.message})}))},a.state={error:null,params:{selectCountry:""},dropDownCountries:[],bucketListCountriesAdded:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.populateBucketListCountry(),console.log("Stateful component successfully mounted.");var t="".concat(h,"/all");console.log(t);fetch(t,{method:"GET",headers:{Authorization:"","Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e.json()})).then((function(t){if(console.log(t),0===t.totalItems)throw new Error("No user found");e.setState({dropDownCountries:t})})).catch((function(t){e.setState({error:t.message})}))}},{key:"populateBucketListCountry",value:function(){var e=this,t="".concat(h,"/bucket-list/user/").concat(f.getUserId());console.log(t);fetch(t,{method:"GET",headers:{Authorization:"","Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e.json()})).then((function(t){if(console.log(t),0===t.totalItems)throw new Error("No user found");e.setState({bucketListCountriesAdded:t})})).catch((function(t){e.setState({error:t.message})}))}},{key:"formatQueryParams",value:function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}},{key:"render",value:function(){var e="";0!==this.state.bucketListCountriesAdded.length&&(e=this.state.bucketListCountriesAdded.map((function(e,t){var n="https://www.google.com/maps/embed/v1/place?key=AIzaSyDfouOPkJqw5K1AKoxQofTjm3jf3dlV4l0&q=".concat(e.nicename,"&maptype=roadmap");return o.a.createElement("div",{key:t},o.a.createElement("h3",null,e.nicename),o.a.createElement(T.a,{url:n,width:"100%",height:"250px",id:t,className:"myClassname",display:"initial",position:"relative"}))})));var t=[];if(0!==this.state.bucketListCountriesAdded.length)for(var n=0;n<this.state.bucketListCountriesAdded.length;n++)t.push(this.state.bucketListCountriesAdded[n].nicename);console.log(t);var a="";return 0!==this.state.dropDownCountries.length&&(a=this.state.dropDownCountries.map((function(e,n){var a="".concat(e.id,"_").concat(e.nicename);if(!t.includes(e.nicename))return o.a.createElement("option",{key:n,name:"nicename",value:a},e.nicename)}))),o.a.createElement("div",{className:"Bucket-list"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",{htmlFor:"countries"},"Choose a country:"),o.a.createElement("select",{name:"selectCountry",id:"countries","aria-controls":"countryView",required:!0},o.a.createElement("option",{value:""},"None"),a),o.a.createElement("button",null,"Add")),o.a.createElement("section",{id:"countryView","aria-live":"polite"},o.a.createElement("header",null,e)))}}]),n}(o.a.Component),L=(n(39),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t,n={},o=new FormData(e.target),r=Object(w.a)(o);try{for(r.s();!(t=r.n()).done;){var s=t.value;n[s[0]]=s[1]}}catch(m){r.e(m)}finally{r.f()}console.log(n);var c=n.selectCountry,i=c.split("_")[0],l=c.split("_")[1];console.log(i,l),a.setState({params:n}),console.log(a.state.params);var u={id:i,user_id:f.getUserId(),nicename:l};console.log(u),fetch("".concat(h,"/visited"),{method:"POST",body:JSON.stringify(u),headers:{"content-type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e.json()})).then((function(e){a.populatevisitedCountry(),console.log(a.state)})).catch((function(e){a.setState({error:e.message})}))},a.state={error:null,params:{selectCountry:""},dropDownCountries:[],visitedCountriesAdded:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.populatevisitedCountry(),console.log("Stateful component successfully mounted.");var t="".concat(h,"/all");console.log(t);fetch(t,{method:"GET",headers:{Authorization:"","Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e.json()})).then((function(t){if(console.log(t),0===t.totalItems)throw new Error("No user found");e.setState({dropDownCountries:t})})).catch((function(t){e.setState({error:t.message})}))}},{key:"populatevisitedCountry",value:function(){var e=this,t="".concat(h,"/visited/user/").concat(f.getUserId());console.log(t);fetch(t,{method:"GET",headers:{Authorization:"","Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e.json()})).then((function(t){if(console.log(t),0===t.totalItems)throw new Error("No user found");e.setState({visitedCountriesAdded:t})})).catch((function(t){e.setState({error:t.message})}))}},{key:"formatQueryParams",value:function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}},{key:"render",value:function(){var e="";0!==this.state.visitedCountriesAdded.length&&(e=this.state.visitedCountriesAdded.map((function(e,t){var n="https://www.google.com/maps/embed/v1/place?key=AIzaSyDfouOPkJqw5K1AKoxQofTjm3jf3dlV4l0&q=".concat(e.nicename,"&maptype=roadmap");return o.a.createElement("div",{key:t},o.a.createElement("h3",null,e.nicename),o.a.createElement(T.a,{url:n,width:"100%",height:"150px",id:t,className:"myClassname",display:"initial",position:"relative"}))})));var t=[];if(0!==this.state.visitedCountriesAdded.length)for(var n=0;n<this.state.visitedCountriesAdded.length;n++)t.push(this.state.visitedCountriesAdded[n].nicename);console.log(t);var a="";return 0!==this.state.dropDownCountries.length&&(a=this.state.dropDownCountries.map((function(e,n){var a="".concat(e.id,"_").concat(e.nicename);if(!t.includes(e.nicename))return o.a.createElement("option",{key:n,name:"nicename",value:a},e.nicename)}))),o.a.createElement("div",{className:"Visited-list"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",{htmlFor:"countries"},"Choose a country:"),o.a.createElement("select",{name:"selectCountry","aria-controls":"countryView",id:"countries",required:!0},o.a.createElement("option",{value:""},"None"),a),o.a.createElement("button",null,"Add")),o.a.createElement("section",{id:"countryView","aria-live":"polite"},o.a.createElement("header",null,e)))}}]),n}(o.a.Component)),U=(n(40),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).logOutClick=function(){console.log("Logging out"),f.clearAuthToken(),f.getUserId=function(e){},window.location="/"},e}return Object(i.a)(n,[{key:"render",value:function(){var e="side-drawer";return this.props.show&&(e="side-drawer open"),o.a.createElement("nav",{className:e},o.a.createElement("div",{className:"menu-list"},o.a.createElement(j.c,{className:"nav-link",to:"/"},o.a.createElement("h3",null,"Home")),o.a.createElement(j.c,{className:"nav-link",to:"/visited"},o.a.createElement("h3",null,"Visited")),o.a.createElement(j.c,{className:"nav-link",to:"/bucket-list"},o.a.createElement("h3",null,"Bucket List")),o.a.createElement(j.c,{className:"nav-link",to:"/",onClick:this.logOutClick},o.a.createElement("h3",null,"Log Out"))))}}]),n}(a.Component)),D=(n(41),function(e){return o.a.createElement("div",{className:"backdrop",onClick:e.click})}),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={sideDrawerOpen:!1},e.drawerToggleButton=function(){e.setState((function(e){return{sideDrawerOpen:!e.sideDrawerOpen}}))},e.backdropClickHandler=function(){e.setState({sideDrawerOpen:!1})},e}return Object(i.a)(n,[{key:"render",value:function(){var e,t={drawerToggleButton:this.drawerToggleButton};return console.log(t),this.state.sideDrawerOpen&&(e=o.a.createElement(D,{click:this.backdropClickHandler})),o.a.createElement(d.Provider,{value:t},o.a.createElement("div",{style:{height:"100%"},className:"App"},o.a.createElement(A,null),o.a.createElement(U,{show:this.state.sideDrawerOpen}),e,o.a.createElement("main",{className:"Main-view"},o.a.createElement(m.d,null,o.a.createElement(m.b,{exact:!0,path:"/",render:function(){return o.a.createElement(O,null)}}),o.a.createElement(m.b,{path:"/visited",render:function(){return f.hasAuthToken()?o.a.createElement(L,null):o.a.createElement(m.a,{to:{pathname:"/"}})}}),o.a.createElement(m.b,{path:"/bucket-list",render:function(){return f.hasAuthToken()?o.a.createElement(I,null):o.a.createElement(m.a,{to:{pathname:"/"}})}}),"/>",o.a.createElement(m.b,{component:g})))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j.a,null,o.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[24,1,2]]]);
//# sourceMappingURL=main.653a6c2c.chunk.js.map